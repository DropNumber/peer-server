// Generated by CoffeeScript 1.6.2
(function() {
  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  window.ClientServerDataChannel = (function() {
    function ClientServerDataChannel(onConnectionCallback, onMessageCallback, onReady) {
      this.onConnectionCallback = onConnectionCallback;
      this.onMessageCallback = onMessageCallback;
      this.onReady = onReady;
      this.onData = __bind(this.onData, this);
      this.onConnection = __bind(this.onConnection, this);
      this.onOpen = __bind(this.onOpen, this);
      this.peer = new Peer({
        host: location.hostname,
        port: 9000,
        config: {
          'iceServers': []
        }
      });
      this.peer.on("open", this.onOpen);
      this.peer.on("connection", this.onConnection);
    }

    ClientServerDataChannel.prototype.onOpen = function(id) {
      this.id = id;
      return this.onReady();
    };

    ClientServerDataChannel.prototype.onConnection = function(connection) {
      var _this = this;

      connection.on("open", function() {
        return _this.onConnectionCallback(connection);
      });
      return connection.on("data", function(data) {
        return _this.onData(connection, data);
      });
    };

    ClientServerDataChannel.prototype.onData = function(connection, data) {
      return this.onMessageCallback(connection, data);
    };

    return ClientServerDataChannel;

  })();

}).call(this);

/*
//@ sourceMappingURL=ClientServerDataChannel.map
*/
